# linux命令

- `wc`字数计算,它可以计算行数(line),字数(word)与字符数(character)

  ```
  $ who | wc -l # 计算当前登陆用户结果的行数
  ```

- `sed`替换,做法是使用s命令--要求正则表达式去寻找,用替换文本替换匹配的文本

  ```
  sed  "s/123/456/" file.txt  # 将file.txt中第一个"123"替换为"456"并输出,不会改变源文件
  sed -i "s/123/456/" file.txt  # 将file.txt中第一个"123"替换为"456",改变源文件
  sed -i "s/123/456/2" file.txt  # 将file.txt中第二个"123"替换为"456",改变源文件
  sed -i "s/123/456/g" file.txt  # 将file.txt中所有匹配到的"123"替换为"456",改变源文件
  # 使用-e 可以实现一次进行多个替换
  sed -e "s/7/77777777/" -e "s/8/888888/" file.txt
  # 但是当你有更多替换需求时,可以将编辑命令全放进一个脚本里,在使用sed搭配-f
  $ cat sed
  s/1/2222/g
  s/3/4444/g
  s/5/6666/g
  $ sed -f sed file.txt
  # 范围,从含有4的行开始,再匹配含有6的行,再讲匹配结果中的1全部替换为11111
  sed "/4/,/6/   s/1/11111/g" sed.txt 
  ```

- `awk`

  ```
  awk -F: '{ print $1, $3 }' /etc/passwd  # 查看passwd文件以:分隔的第1和第3个变量
  awk -F: '{ print "user", $1,"is really", $5}' /etc/passwd 
  # awk的print会自动提供结尾的换行符,但是如果使用printf语句就需要用户自己提供,记得在print的参数间用逗号隔开,否则所有值将会被连接起来
  ```

- `grep`可以从输入的数据文件中取出特定的文本行

  ```
  cat /etc/passwd | grep "^root"  # 取出以root开头的行
  cat /etc/passwd | grep -v "^#"  # 取出不包含注释的行
  ```

- `sort`将输入行按照键值字段与数据类型选型排序

  ```
  sort -t: -k1,1 /etc/passwd  # -k选项指定排序字段,-k2.4,5.6指的是从第二个字段的第4个字符开始比较,一直比到第五个字段的第6个字符,-t选项来选择字段的定界符
  # 当出现多个-k选项时,会先从第一个键值字段开始排序,找出匹配该键值的记录后,再进行第二键值字段排序,以此类推
  sort -t: -k1nr /etc/passwd # 以第一个字段整数倒序排序
  ```

- `tail`查看结尾行数

  ```
  tail -n 3  file.txt # 查看文件后三行
  tail -3  file.txt # 查看文件后三行
  tail -f file.txt # 监控文件输出
  ```

  

# linux符号

- `|`管道,管道符号可以在两程序间建立管道(pipeline),例如:

  ```
  who | wc -l # who的输出,成了wc的输入
  ```

  构造管道时,应该试着让每个阶段的数据量变得更少,换句话说,如果你有两个要完成的步骤与先后次序无关,你可以把会让数据量变少的那一个步骤放在管道的前面,这么做可以提升脚本的整体性能.例如:使用sort排序之前,先以grep找出相关的行,这样可以让sort少做些事

- `;`分号,可用来分隔同一行里的多条命令,shell会依次执行这些命令

- `&`符号,shell将会在后台执行其前面的命令,这意味着shell不用等到该命令完成,就可以继续执行下一个命令

- `>`重定向符,在目的文件不存在时,会新建一个,然而,如果目的文件已经存在,它就会被覆盖掉,原本的数据都会丢失

- `>>`将标准输出附加到目标文件结尾处

# shell

## 位于第一行的 #!

当一个文件开头的两个字符是#!时,内核会扫描该行的其余部分,看是否存在可用来执行程序的解释器的完整路径(中间如果出现任何空白符号都会略过)

Shell脚本通常一开始都是`#! /bin/sh`

## 变量

在shell世界里,变量值可以是(而且通常是)空值,也就是不包含任何字符.shell变量名称的开头是一个字母下划线符号,后面可以接任意长度的字母,数字或下划线.变量名称的字符长度并无限制,shell变量可用来保存字符串值,所保存的字符串数同样没有限制.

变量赋值的方式为:先写变量名称,紧接着=字符,最后是新值,中间完全没有任何空格.当你想取出shell变量的值时,需于变量名称前面加上`$`字符.当所赋予的值内含空格时,请加上引号.

```
first=a second=b last=c  # 单行可进行多次赋值
name="a b c"  # 值中包含空格时使用引号
copy=$name  # 当变量作为新变量的值时,此处不再需要引号
full="$first $second $last"  # 当将几个变量连接起来时,需要使用引号
```







`参考自`:**《shell脚本学习指南》**

